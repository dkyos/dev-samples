
def SDK_PATH='/home/dkyun77/tizen-sdk/tools/'

task version(type:Exec) {
    workingDir SDK_PATH

    ignoreExitValue = true

    //commandLine 'cmd', '/c', 'stop.bat'
    commandLine './sdb', 'version'
    //commandLine './sdb', 'help'

	File file = new File("asdf")  
	println "file has ${file.length()} bytes"

	//String fileContents = new File("asdf").text
	//println (fileContents)

	standardOutput = new ByteArrayOutputStream()
	errorOutput = standardOutput
	doLast {
		if (execResult.exitValue != 0) {
			println("========================================")
			println("Exit Value is " + execResult.exitValue)
			println("----------------------")
			//println(standardOutput.toString())
			println(errorOutput.toString())
			println("========================================")
		}else{
			println("========================================")
			println("Exit Value is " + execResult.exitValue)
			println("----------------------")

			def version = "Smart Development Bridge version"
			if( errorOutput.toString().contains(version) ){
				println "same"
			}else{
				println "not same"
			}

			//println(standardOutput.toString())
			println(errorOutput.toString())
			println("========================================")
		}
	}
}

